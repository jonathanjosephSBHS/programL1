<html>
<head>
    <title>Run Mania</title>
 </head>
<body>
    <canvas id="gameCanvas" width="800", height="800"></canvas>
    <script>
    
    var canvas,canvasContext;
    
    window.onload = function(){
        canvas = document.getElementById('gameCanvas');
        canvasContext = canvas.getContext('2d');
                
        document.addEventListener('keydown', keyPressed);
        document.addEventListener('keyup', keyReleased);
        
        setInterval(mainloop, 1000/60)
    }
    
    var road = new Image();
    road.src = 'images/road.jpg';
        
    var car = new Image();
    car.src = 'images/car.png';
    
    const PLAYER_SIZE = 15;
    var playerXpos = 200;
    var playerYpos = 400 - PLAYER_SIZE;
    var playerXspeed = 5;
    var playerYspeed = 5;
    
    var enemyXpos = 40;
    var enemyYpos = 40;
    const ENEMY_SIZE = 40;
    var enemyXspeed = 8;
    var enemyYspeed = 8;
    
    var leftKeyPress = false;
    var rightKeyPress = false;
    var upKeyPress = false;
    var downKeyPress = false;
        
    const LEFT_KEY = 65
    const RIGHT_KEY = 68
    const UP_KEY = 87
    const DOWN_KEY = 83
    
    var score = 0;
    
    function mainloop(){
        colorRect(300,100,100,100,'yellow')//score
        colorRect(0,0,canvas.width,canvas.height,'black')//bg
        drawImg(road,0,10,1000,200)
        colorRect(playerXpos,playerYpos,PLAYER_SIZE,PLAYER_SIZE,'green')//player
        drawImg(car,enemyXpos,enemyYpos,100,50,)//enemy
        //colorRect("30px", "Consolas", "black", 280, 40, "text")//score
        drawText('30px Arial','score: '+score,280,40,'red');
        
        enemyMove();
        playerMove();

    }
    
    function keyPressed(evt){
        if(evt.keyCode == LEFT_KEY){
            leftKeyPress = true;
        }
        if(evt.keyCode == RIGHT_KEY){
            rightKeyPress = true;
        }
        if(evt.keyCode == UP_KEY){
            upKeyPress = true;
        }
        if(evt.keyCode == DOWN_KEY){
            downKeyPress = true;
        }
        
    }
    
    function keyReleased(evt){
         if(evt.keyCode == LEFT_KEY){
            leftKeyPress = false;
        }
        if(evt.keyCode == RIGHT_KEY){
            rightKeyPress = false;
        }
        if(evt.keyCode == UP_KEY){
            upKeyPress = false;
        }
        if(evt.keyCode == DOWN_KEY){
            downKeyPress = false;
        }
        
    }
    
    function enemyMove(){
        enemyXpos += enemyXspeed
        
        if(enemyXpos > canvas.width){
            enemyXpos = 0 - ENEMY_SIZE;
        }
        
        if(enemyYpos + ENEMY_SIZE > playerYpos && enemyYpos < playerYpos + PLAYER_SIZE && enemyXpos + ENEMY_SIZE > playerXpos && enemyXpos < playerXpos + PLAYER_SIZE){
            playerXpos = 400;
            playerYpos = canvas.height - PLAYER_SIZE;
        }
        
    }
    
    function playerMove(){
        if(leftKeyPress && playerXpos > 0){
            playerXpos -= playerXspeed
        }
        if(rightKeyPress && playerXpos < canvas.width - PLAYER_SIZE){
            playerXpos += playerXspeed
        }
        if(upKeyPress && playerYpos > 0){
            playerYpos -= playerYspeed
        }
        if(downKeyPress && playerYpos <  canvas.height - PLAYER_SIZE){
            playerYpos += playerYspeed
        }
    }
    
    
    function colorRect(x,y,w,h,c){
        canvasContext.fillStyle = c;
        canvasContext.fillRect (x,y,w,h,c);
    }
        
    function drawImg(src,x,y,w,h){
        canvasContext.drawImage(src,x,y,w,h);
    }
        
    function drawText(f,msg,x,y,c){
        canvasContext.font = f;
        canvasContext.fillStyle = c;
        canvasContext.fillText(msg, x, y);
    }
    

    
</script>
</body> 
</html>